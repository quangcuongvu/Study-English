#ref https://realpython.com/python-requests/
import requests
import io
import bs4
import utils

def writeHTMLfile(data):
    #encoding='UTF-8'
	file = io.open('code.html', 'w',encoding='utf8')
	file.write(res.text)
	file.close()


def create_dict_word(id, word,tran, sentence, nb_repeat, next_time):
    return {'id': id, 'word': word,'tran':tran, 'sentence': sentence, 'nb_repeat': nb_repeat, 'next_time': next_time}





deck_name = "5000 basic word"

list_links=["https://www.studytienganh.vn/exam/2","https://www.studytienganh.vn/exam/3","https://www.studytienganh.vn/exam/4","https://www.studytienganh.vn/exam/5","https://www.studytienganh.vn/exam/103","https://www.studytienganh.vn/exam/167","https://www.studytienganh.vn/exam/168","https://www.studytienganh.vn/exam/169","https://www.studytienganh.vn/exam/171","https://www.studytienganh.vn/exam/172","https://www.studytienganh.vn/exam/173","https://www.studytienganh.vn/exam/174","https://www.studytienganh.vn/exam/175","https://www.studytienganh.vn/exam/452","https://www.studytienganh.vn/exam/453","https://www.studytienganh.vn/exam/454","https://www.studytienganh.vn/exam/455","https://www.studytienganh.vn/exam/456","https://www.studytienganh.vn/exam/457","https://www.studytienganh.vn/exam/458","https://www.studytienganh.vn/exam/459","https://www.studytienganh.vn/exam/460","https://www.studytienganh.vn/exam/461","https://www.studytienganh.vn/exam/462","https://www.studytienganh.vn/exam/463","https://www.studytienganh.vn/exam/464","https://www.studytienganh.vn/exam/465","https://www.studytienganh.vn/exam/466","https://www.studytienganh.vn/exam/467","https://www.studytienganh.vn/exam/468","https://www.studytienganh.vn/exam/469","https://www.studytienganh.vn/exam/470","https://www.studytienganh.vn/exam/471","https://www.studytienganh.vn/exam/472","https://www.studytienganh.vn/exam/473","https://www.studytienganh.vn/exam/474","https://www.studytienganh.vn/exam/475","https://www.studytienganh.vn/exam/476","https://www.studytienganh.vn/exam/477","https://www.studytienganh.vn/exam/478","https://www.studytienganh.vn/exam/479","https://www.studytienganh.vn/exam/480","https://www.studytienganh.vn/exam/481","https://www.studytienganh.vn/exam/482","https://www.studytienganh.vn/exam/483","https://www.studytienganh.vn/exam/484","https://www.studytienganh.vn/exam/485","https://www.studytienganh.vn/exam/486","https://www.studytienganh.vn/exam/487","https://www.studytienganh.vn/exam/488","https://www.studytienganh.vn/exam/489","https://www.studytienganh.vn/exam/490","https://www.studytienganh.vn/exam/491","https://www.studytienganh.vn/exam/492","https://www.studytienganh.vn/exam/493","https://www.studytienganh.vn/exam/494","https://www.studytienganh.vn/exam/495","https://www.studytienganh.vn/exam/496","https://www.studytienganh.vn/exam/497","https://www.studytienganh.vn/exam/498","https://www.studytienganh.vn/exam/499","https://www.studytienganh.vn/exam/500","https://www.studytienganh.vn/exam/501","https://www.studytienganh.vn/exam/502","https://www.studytienganh.vn/exam/503","https://www.studytienganh.vn/exam/504","https://www.studytienganh.vn/exam/505","https://www.studytienganh.vn/exam/506","https://www.studytienganh.vn/exam/507","https://www.studytienganh.vn/exam/508","https://www.studytienganh.vn/exam/509","https://www.studytienganh.vn/exam/510","https://www.studytienganh.vn/exam/511","https://www.studytienganh.vn/exam/512","https://www.studytienganh.vn/exam/513","https://www.studytienganh.vn/exam/514","https://www.studytienganh.vn/exam/515","https://www.studytienganh.vn/exam/516","https://www.studytienganh.vn/exam/517","https://www.studytienganh.vn/exam/518"]
list_links+=["https://www.studytienganh.vn/exam/519","https://www.studytienganh.vn/exam/520","https://www.studytienganh.vn/exam/521","https://www.studytienganh.vn/exam/522","https://www.studytienganh.vn/exam/523","https://www.studytienganh.vn/exam/524","https://www.studytienganh.vn/exam/525","https://www.studytienganh.vn/exam/526","https://www.studytienganh.vn/exam/527","https://www.studytienganh.vn/exam/528","https://www.studytienganh.vn/exam/529","https://www.studytienganh.vn/exam/530","https://www.studytienganh.vn/exam/531","https://www.studytienganh.vn/exam/532","https://www.studytienganh.vn/exam/533","https://www.studytienganh.vn/exam/534","https://www.studytienganh.vn/exam/535","https://www.studytienganh.vn/exam/536","https://www.studytienganh.vn/exam/537","https://www.studytienganh.vn/exam/538","https://www.studytienganh.vn/exam/539","https://www.studytienganh.vn/exam/540","https://www.studytienganh.vn/exam/541","https://www.studytienganh.vn/exam/542","https://www.studytienganh.vn/exam/595","https://www.studytienganh.vn/exam/596","https://www.studytienganh.vn/exam/597","https://www.studytienganh.vn/exam/598","https://www.studytienganh.vn/exam/599","https://www.studytienganh.vn/exam/600","https://www.studytienganh.vn/exam/601","https://www.studytienganh.vn/exam/602","https://www.studytienganh.vn/exam/603","https://www.studytienganh.vn/exam/604","https://www.studytienganh.vn/exam/605","https://www.studytienganh.vn/exam/606","https://www.studytienganh.vn/exam/607","https://www.studytienganh.vn/exam/608","https://www.studytienganh.vn/exam/609","https://www.studytienganh.vn/exam/610","https://www.studytienganh.vn/exam/611","https://www.studytienganh.vn/exam/612","https://www.studytienganh.vn/exam/613","https://www.studytienganh.vn/exam/614","https://www.studytienganh.vn/exam/615","https://www.studytienganh.vn/exam/616","https://www.studytienganh.vn/exam/617","https://www.studytienganh.vn/exam/618","https://www.studytienganh.vn/exam/619","https://www.studytienganh.vn/exam/620","https://www.studytienganh.vn/exam/621","https://www.studytienganh.vn/exam/622","https://www.studytienganh.vn/exam/623","https://www.studytienganh.vn/exam/624","https://www.studytienganh.vn/exam/625","https://www.studytienganh.vn/exam/626","https://www.studytienganh.vn/exam/627","https://www.studytienganh.vn/exam/628","https://www.studytienganh.vn/exam/629","https://www.studytienganh.vn/exam/630","https://www.studytienganh.vn/exam/631","https://www.studytienganh.vn/exam/632","https://www.studytienganh.vn/exam/633","https://www.studytienganh.vn/exam/634","https://www.studytienganh.vn/exam/635","https://www.studytienganh.vn/exam/636","https://www.studytienganh.vn/exam/637","https://www.studytienganh.vn/exam/638","https://www.studytienganh.vn/exam/639","https://www.studytienganh.vn/exam/640","https://www.studytienganh.vn/exam/641","https://www.studytienganh.vn/exam/642","https://www.studytienganh.vn/exam/643","https://www.studytienganh.vn/exam/644","https://www.studytienganh.vn/exam/645","https://www.studytienganh.vn/exam/646","https://www.studytienganh.vn/exam/647","https://www.studytienganh.vn/exam/648","https://www.studytienganh.vn/exam/649","https://www.studytienganh.vn/exam/650"]
list_links+=["https://www.studytienganh.vn/exam/651","https://www.studytienganh.vn/exam/652","https://www.studytienganh.vn/exam/653","https://www.studytienganh.vn/exam/654","https://www.studytienganh.vn/exam/655","https://www.studytienganh.vn/exam/656","https://www.studytienganh.vn/exam/657","https://www.studytienganh.vn/exam/658","https://www.studytienganh.vn/exam/659","https://www.studytienganh.vn/exam/660","https://www.studytienganh.vn/exam/661","https://www.studytienganh.vn/exam/662","https://www.studytienganh.vn/exam/663","https://www.studytienganh.vn/exam/664","https://www.studytienganh.vn/exam/665","https://www.studytienganh.vn/exam/666","https://www.studytienganh.vn/exam/667","https://www.studytienganh.vn/exam/668","https://www.studytienganh.vn/exam/669","https://www.studytienganh.vn/exam/670","https://www.studytienganh.vn/exam/671","https://www.studytienganh.vn/exam/672","https://www.studytienganh.vn/exam/673","https://www.studytienganh.vn/exam/674","https://www.studytienganh.vn/exam/675","https://www.studytienganh.vn/exam/676","https://www.studytienganh.vn/exam/677","https://www.studytienganh.vn/exam/678","https://www.studytienganh.vn/exam/679","https://www.studytienganh.vn/exam/680","https://www.studytienganh.vn/exam/681","https://www.studytienganh.vn/exam/682","https://www.studytienganh.vn/exam/683","https://www.studytienganh.vn/exam/684","https://www.studytienganh.vn/exam/685","https://www.studytienganh.vn/exam/686","https://www.studytienganh.vn/exam/687","https://www.studytienganh.vn/exam/688","https://www.studytienganh.vn/exam/689","https://www.studytienganh.vn/exam/690","https://www.studytienganh.vn/exam/691","https://www.studytienganh.vn/exam/692","https://www.studytienganh.vn/exam/693","https://www.studytienganh.vn/exam/694","https://www.studytienganh.vn/exam/695","https://www.studytienganh.vn/exam/696","https://www.studytienganh.vn/exam/697","https://www.studytienganh.vn/exam/698","https://www.studytienganh.vn/exam/699","https://www.studytienganh.vn/exam/700","https://www.studytienganh.vn/exam/701","https://www.studytienganh.vn/exam/702","https://www.studytienganh.vn/exam/703","https://www.studytienganh.vn/exam/704","https://www.studytienganh.vn/exam/705","https://www.studytienganh.vn/exam/706","https://www.studytienganh.vn/exam/707","https://www.studytienganh.vn/exam/708","https://www.studytienganh.vn/exam/709","https://www.studytienganh.vn/exam/710","https://www.studytienganh.vn/exam/711","https://www.studytienganh.vn/exam/712","https://www.studytienganh.vn/exam/713","https://www.studytienganh.vn/exam/714","https://www.studytienganh.vn/exam/715","https://www.studytienganh.vn/exam/716","https://www.studytienganh.vn/exam/717","https://www.studytienganh.vn/exam/718","https://www.studytienganh.vn/exam/719","https://www.studytienganh.vn/exam/720","https://www.studytienganh.vn/exam/721","https://www.studytienganh.vn/exam/722","https://www.studytienganh.vn/exam/723","https://www.studytienganh.vn/exam/724","https://www.studytienganh.vn/exam/725","https://www.studytienganh.vn/exam/726","https://www.studytienganh.vn/exam/727","https://www.studytienganh.vn/exam/728","https://www.studytienganh.vn/exam/729","https://www.studytienganh.vn/exam/730"]
list_links+=["https://www.studytienganh.vn/exam/731","https://www.studytienganh.vn/exam/732","https://www.studytienganh.vn/exam/733","https://www.studytienganh.vn/exam/734","https://www.studytienganh.vn/exam/735","https://www.studytienganh.vn/exam/736","https://www.studytienganh.vn/exam/737","https://www.studytienganh.vn/exam/738","https://www.studytienganh.vn/exam/739","https://www.studytienganh.vn/exam/740","https://www.studytienganh.vn/exam/741","https://www.studytienganh.vn/exam/742","https://www.studytienganh.vn/exam/743","https://www.studytienganh.vn/exam/744","https://www.studytienganh.vn/exam/745","https://www.studytienganh.vn/exam/746","https://www.studytienganh.vn/exam/747","https://www.studytienganh.vn/exam/748","https://www.studytienganh.vn/exam/749","https://www.studytienganh.vn/exam/750","https://www.studytienganh.vn/exam/751","https://www.studytienganh.vn/exam/752","https://www.studytienganh.vn/exam/753","https://www.studytienganh.vn/exam/754","https://www.studytienganh.vn/exam/755","https://www.studytienganh.vn/exam/756","https://www.studytienganh.vn/exam/757","https://www.studytienganh.vn/exam/758","https://www.studytienganh.vn/exam/759","https://www.studytienganh.vn/exam/760","https://www.studytienganh.vn/exam/761","https://www.studytienganh.vn/exam/762","https://www.studytienganh.vn/exam/763","https://www.studytienganh.vn/exam/764","https://www.studytienganh.vn/exam/765","https://www.studytienganh.vn/exam/766","https://www.studytienganh.vn/exam/767","https://www.studytienganh.vn/exam/768","https://www.studytienganh.vn/exam/769","https://www.studytienganh.vn/exam/770","https://www.studytienganh.vn/exam/771","https://www.studytienganh.vn/exam/772","https://www.studytienganh.vn/exam/773","https://www.studytienganh.vn/exam/774","https://www.studytienganh.vn/exam/775","https://www.studytienganh.vn/exam/776","https://www.studytienganh.vn/exam/777","https://www.studytienganh.vn/exam/778","https://www.studytienganh.vn/exam/779","https://www.studytienganh.vn/exam/780","https://www.studytienganh.vn/exam/781","https://www.studytienganh.vn/exam/782","https://www.studytienganh.vn/exam/783","https://www.studytienganh.vn/exam/784","https://www.studytienganh.vn/exam/785","https://www.studytienganh.vn/exam/786","https://www.studytienganh.vn/exam/787","https://www.studytienganh.vn/exam/788","https://www.studytienganh.vn/exam/789","https://www.studytienganh.vn/exam/790","https://www.studytienganh.vn/exam/791","https://www.studytienganh.vn/exam/792","https://www.studytienganh.vn/exam/793","https://www.studytienganh.vn/exam/794","https://www.studytienganh.vn/exam/795","https://www.studytienganh.vn/exam/796","https://www.studytienganh.vn/exam/797","https://www.studytienganh.vn/exam/798","https://www.studytienganh.vn/exam/799","https://www.studytienganh.vn/exam/800","https://www.studytienganh.vn/exam/801","https://www.studytienganh.vn/exam/802","https://www.studytienganh.vn/exam/803","https://www.studytienganh.vn/exam/804","https://www.studytienganh.vn/exam/805","https://www.studytienganh.vn/exam/806","https://www.studytienganh.vn/exam/807","https://www.studytienganh.vn/exam/808","https://www.studytienganh.vn/exam/809","https://www.studytienganh.vn/exam/810"]
list_links += ["https://www.studytienganh.vn/exam/811", "https://www.studytienganh.vn/exam/812", "https://www.studytienganh.vn/exam/813", "https://www.studytienganh.vn/exam/814", "https://www.studytienganh.vn/exam/815", "https://www.studytienganh.vn/exam/816", "https://www.studytienganh.vn/exam/817", "https://www.studytienganh.vn/exam/818", "https://www.studytienganh.vn/exam/819", "https://www.studytienganh.vn/exam/820", "https://www.studytienganh.vn/exam/821", "https://www.studytienganh.vn/exam/822", "https://www.studytienganh.vn/exam/823", "https://www.studytienganh.vn/exam/824"]


deck_name = "ielts"

list_links=["https://www.studytienganh.vn/exam/249","https://www.studytienganh.vn/exam/250","https://www.studytienganh.vn/exam/251","https://www.studytienganh.vn/exam/252","https://www.studytienganh.vn/exam/1328","https://www.studytienganh.vn/exam/1329","https://www.studytienganh.vn/exam/1330","https://www.studytienganh.vn/exam/1331","https://www.studytienganh.vn/exam/1332","https://www.studytienganh.vn/exam/1333","https://www.studytienganh.vn/exam/1334","https://www.studytienganh.vn/exam/1335","https://www.studytienganh.vn/exam/1336","https://www.studytienganh.vn/exam/1337","https://www.studytienganh.vn/exam/1338","https://www.studytienganh.vn/exam/1339","https://www.studytienganh.vn/exam/1340","https://www.studytienganh.vn/exam/1341","https://www.studytienganh.vn/exam/1342","https://www.studytienganh.vn/exam/1343","https://www.studytienganh.vn/exam/1344","https://www.studytienganh.vn/exam/1345","https://www.studytienganh.vn/exam/1346","https://www.studytienganh.vn/exam/1347","https://www.studytienganh.vn/exam/1348","https://www.studytienganh.vn/exam/1349","https://www.studytienganh.vn/exam/1350","https://www.studytienganh.vn/exam/1351","https://www.studytienganh.vn/exam/1352","https://www.studytienganh.vn/exam/1353","https://www.studytienganh.vn/exam/1354","https://www.studytienganh.vn/exam/1355","https://www.studytienganh.vn/exam/1356","https://www.studytienganh.vn/exam/1357","https://www.studytienganh.vn/exam/1358","https://www.studytienganh.vn/exam/1359","https://www.studytienganh.vn/exam/1360","https://www.studytienganh.vn/exam/1361","https://www.studytienganh.vn/exam/1362","https://www.studytienganh.vn/exam/1363","https://www.studytienganh.vn/exam/1364","https://www.studytienganh.vn/exam/1365","https://www.studytienganh.vn/exam/1366","https://www.studytienganh.vn/exam/1367","https://www.studytienganh.vn/exam/1368","https://www.studytienganh.vn/exam/1369","https://www.studytienganh.vn/exam/1370","https://www.studytienganh.vn/exam/1371","https://www.studytienganh.vn/exam/1372","https://www.studytienganh.vn/exam/1373","https://www.studytienganh.vn/exam/1374","https://www.studytienganh.vn/exam/1375","https://www.studytienganh.vn/exam/1376","https://www.studytienganh.vn/exam/1377","https://www.studytienganh.vn/exam/1378","https://www.studytienganh.vn/exam/1379","https://www.studytienganh.vn/exam/1380","https://www.studytienganh.vn/exam/1381","https://www.studytienganh.vn/exam/1382","https://www.studytienganh.vn/exam/1383","https://www.studytienganh.vn/exam/1384","https://www.studytienganh.vn/exam/1385","https://www.studytienganh.vn/exam/10024","https://www.studytienganh.vn/exam/10025","https://www.studytienganh.vn/exam/10026","https://www.studytienganh.vn/exam/10027","https://www.studytienganh.vn/exam/10028","https://www.studytienganh.vn/exam/10029","https://www.studytienganh.vn/exam/10030","https://www.studytienganh.vn/exam/10031","https://www.studytienganh.vn/exam/10032","https://www.studytienganh.vn/exam/10033","https://www.studytienganh.vn/exam/10034","https://www.studytienganh.vn/exam/10035","https://www.studytienganh.vn/exam/10036","https://www.studytienganh.vn/exam/10038","https://www.studytienganh.vn/exam/10039","https://www.studytienganh.vn/exam/10040","https://www.studytienganh.vn/exam/10041","https://www.studytienganh.vn/exam/10042"]
list_links+=["https://www.studytienganh.vn/exam/10043","https://www.studytienganh.vn/exam/10044","https://www.studytienganh.vn/exam/10045","https://www.studytienganh.vn/exam/10046","https://www.studytienganh.vn/exam/10047","https://www.studytienganh.vn/exam/10048","https://www.studytienganh.vn/exam/10049","https://www.studytienganh.vn/exam/10050","https://www.studytienganh.vn/exam/10051","https://www.studytienganh.vn/exam/10052"]
path_json_file='words.json'
data = utils.ham_read_json(path_json_file)
list_words=[]

dem=0
for link in list_links:
    print('-------------', link, '-------------')
    word = {}
    
    res = requests.get(link)
    writeHTMLfile(res.text)

    soup = bs4.BeautifulSoup(res.text, 'html.parser')
    list_rows = soup.select('.infobox table')[0].select('tr')  # list

    for irow in range(1, len(list_rows)):
        row = list_rows[irow]
        #print(row)
        list_cols = row.select('td')
        current_word = list_cols[0].select('strong')[0].get_text()
        current_tran = list_cols[0].select('br')[0].get_text()
        current_setence = list_cols[3].get_text()
        print(current_word)
        print(current_tran)
        print(current_setence)
        print('----')
        #add to json obj
        
        list_words.append(create_dict_word(
            dem, current_word, current_tran,current_setence, 0, 0))
        dem += 1
# print(list_words)
data[deck_name]=list_words
utils.ham_write_json(data, path_json_file)
    
